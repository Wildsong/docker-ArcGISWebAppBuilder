// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
define(["esri/request","jimu/portalUrlUtils","jimu/portalUtils"],function(f,d,g){return{queryProvidedWidgets:function(b){var c='type:"'+(d.isOnline(window.portalUrl)?"Web AppBuilder Widget":"AppBuilder Extension")+'" AND typekeywords:"Widget" AND orgid:'+window.portalSelf.user.orgId;"HTML"===window.appInfo.appType.toUpperCase()&&(c+=' -typekeywords:"HTML3D"');var e=d.getStandardPortalUrl(window.portalUrl);return g.getPortal(e).queryItems({q:b?c+" AND "+b:c,sortField:"title",sortOrder:"asc",num:100,
start:1}).then(function(a){return a.results})},querySubscribedWidgets:function(b){var c=d.getStandardPortalUrl(window.portalUrl);return f({url:c+"/sharing/rest/community/users/"+window.portalSelf.user.username+"/provisionedListings",content:{f:"json",num:100,start:1},handleAs:"json"}).then(function(e){return e.provisionedListings.filter(function(a){return b?"Web AppBuilder Widget"===a.type&&a.title&&0<=a.title.toUpperCase().indexOf(b.toUpperCase()):"Web AppBuilder Widget"===a.type})})}}});