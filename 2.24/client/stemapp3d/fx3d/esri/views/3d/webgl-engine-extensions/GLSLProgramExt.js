/**
 * Copyright @ 2022 Esri.
 * All rights reserved under the copyright laws of the United States and applicable international laws, treaties, and conventions.
 */
define(["esri/core/libs/gl-matrix-2/vec4f64","esri/core/libs/gl-matrix-2/vec3f64","esri/core/libs/gl-matrix-2/vec2f64","esri/core/libs/gl-matrix-2/vec4","esri/core/libs/gl-matrix-2/vec3","esri/core/libs/gl-matrix-2/vec2"],function(t,i,r,n,e,o){var a=i.vec3f64,e=e.vec3,f=r.vec2f64,o=o.vec2,u=t.vec4f64,n=n.vec4,l=0;return function(t,i){var r,c,s,g=l++,h=function(){if(null==r){r=i.createProgram();for(var n=0;n<t.length;++n)i.attachShader(r,t[n].getGLName());m()}},m=function(){null!=r&&(i.linkProgram(r),i.getProgramParameter(r,35714)||console.error("Could not initialize shader\nVALIDATE_STATUS: "+i.getProgramParameter(r,35715)+", gl error ["+i.getError()+"] infoLog: "+i.getProgramInfoLog(r)),c={},s={})};this.init=function(){h()},this.dispose=function(){for(var n=0;n<t.length;++n){var e=t[n].getGLName();i.isShader(e)&&i.deleteShader(e)}i.isProgram(r)&&i.deleteProgram(r)},this.getId=function(){return g},this.getShader=function(i){return t["vertex"===i?0:1]},this.use=function(){h(),i.useProgram(r)},this.getLocation=function(t){return h(),c[t]||(c[t]=i.getUniformLocation(r,t)),c[t]},this.hasUniform=function(t){return null!=this.getLocation(t)},this.getAttribLocation=function(t){return h(),null==s[t]&&(s[t]=i.getAttribLocation(r,t)),s[t]};var v={};this.uniform1i=function(t,r){var n=v[t];null!=n&&r===n||(i.uniform1i(this.getLocation(t,i),r),v[t]=r)},this.uniform1f=function(t,r){var n=v[t];null!=n&&r===n||(i.uniform1f(this.getLocation(t,i),r),v[t]=r)};var L={};this.uniform2f=function(t,r,n){var e=L[t];null!=e&&r===e[0]&&n===e[1]||(i.uniform2f(this.getLocation(t,i),r,n),null==e?L[t]=f.fromValues(r,n):o.set(e,r,n))},this.uniform2fv=function(t,r){var n=L[t];(r.length>2||null==n||r[0]!==n[0]||r[1]!==n[1])&&(i.uniform2fv(this.getLocation(t,i),r),null==n?L[t]=f.create(r):o.copy(n,r))};var d={};this.uniform3f=function(t,r,n,o){var f=d[t];null!=f&&r===f[0]&&n===f[1]&&o===f[2]||(i.uniform3f(this.getLocation(t,i),r,n,o),null==f?d[t]=a.fromValues(r,n,o):e.set(f,r,n,o))},this.uniform3fv=function(t,r){var n=d[t];(r.length>3||null==n||r[0]!==n[0]||r[1]!==n[1]||r[2]!==n[2])&&(i.uniform3fv(this.getLocation(t,i),r),null==n?d[t]=a.create(r):e.copy(n,r))};var P={};this.uniform4f=function(t,r,e,o,a){var f=P[t];null!=f&&r===f[0]&&e===f[1]&&o===f[2]&&a===f[3]||(i.uniform4f(this.getLocation(t,i),r,e,o,a),null==f?P[t]=u.fromValues(r,e,o,a):n.set(f,r,e,o,a))},this.uniform4fv=function(t,r){var e=P[t];(r.length>4||null==e||r[0]!==e[0]||r[1]!==e[1]||r[2]!==e[2]||r[3]!==e[3])&&(i.uniform4fv(this.getLocation(t,i),r),null==e?P[t]=u.create(r):n.copy(e,r))},this.uniformMatrix4fv=function(t,r){i.uniformMatrix4fv(this.getLocation(t,i),!1,r)},this.dispose=function(){if(null!=r){for(var n=0;n<t.length;++n){var e=t[n].getGLName();i.detachShader(r,e),i.deleteShader(e)}i.deleteProgram(r)}}}});