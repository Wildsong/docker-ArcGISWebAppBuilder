// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
define(["esri/request","jimu/portalUrlUtils","jimu/portalUtils"],function(f,d,g){return{queryProvidedWidgets:function(c){var b='type:"'+(d.isOnline(window.portalUrl)?"Web AppBuilder Widget":"AppBuilder Extension")+'" AND typekeywords:"Widget,'+window.appInfo.appType+'" AND orgid:'+window.portalSelf.user.orgId;"HTML"===window.appInfo.appType.toUpperCase()?b+=' AND -typekeywords:"HTML3D"':"HTML3D"===window.appInfo.appType.toUpperCase()&&(b+=' AND typekeywords:"HTML3D"');var e=d.getStandardPortalUrl(window.portalUrl);
return g.getPortal(e).queryItems({q:c?b+" AND "+c:b,sortField:"title",sortOrder:"asc",num:100,start:1}).then(function(a){return a.results})},querySubscribedWidgets:function(c){var b=d.getStandardPortalUrl(window.portalUrl);return f({url:b+"/sharing/rest/community/users/"+window.portalSelf.user.username+"/provisionedListings",content:{f:"json",num:100,start:1},handleAs:"json"}).then(function(e){return e.provisionedListings.filter(function(a){return c?"Web AppBuilder Widget"===a.type&&a.title&&0<=a.title.toUpperCase().indexOf(c.toUpperCase())&&
-1<a.typeKeywords.indexOf(window.appInfo.appType):"Web AppBuilder Widget"===a.type&&-1<a.typeKeywords.indexOf(window.appInfo.appType)})})}}});